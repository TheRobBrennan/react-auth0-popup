version: '3'

services:
  'react-hooks-auth0-web':
    build:
      context: ./
      dockerfile: ./src/Dockerfile
    container_name: 'react-hooks-auth0-web'

    # environment:
      # Host environment will need to supply the following environment variables
      # AUTH0_DOMAIN: 'mysite.auth0.com'
      # AUTH0_CLIENT_ID: 'some-long-string'
      # AUTH0_REDIRECT_URL: 'https://mywebsite.com/'
      # AUTH0_LOGOUT_URL: 'https://mywebsite.com/'
      # AUTH0_AUDIENCE: 'https://tvmoviesapi'

    # If you want local changes to update the Docker container, you can pass through project files like this:
    volumes:
      - ./public:/usr/app/public
      - ./src:/usr/app/src

    depends_on:
      - react-hooks-auth0-api

  'react-hooks-auth0-api':
    build:
      context: ./
      dockerfile: ./server/Dockerfile
    container_name: 'react-hooks-auth0-api'

    environment:
      PORT: '3005'
      # Host environment will need to supply the following environment variables
      # AUTH0_DOMAIN: 'mysite.auth0.com'
      # AUTH0_AUDIENCE: 'https://tvmoviesapi'

    ports:
      - "3005:3005"

    # If you want local changes to update the Docker container, you can pass through project files like this:
    volumes:
      - ./server:/usr/app/server
      - ./api:/usr/app/api
